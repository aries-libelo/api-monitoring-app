sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/base/Log"],(e,t,o,s)=>{"use strict";return e.extend("com.sap.cep.apimonitoringapp.apimonitorui.controller.Homepage",{onInit:function(){const e={RequestType:[{key:"STATUS",text:"Status API"},{key:"GET",text:"Get API"},{key:"RESEND",text:"Resend API"},{key:"CANCEL",text:"Cancel API"}]};const o=new t(e);this.getView().setModel(o,"RequestTypeModel")},onSend:function(){this.loadBusyIndicator();const e=this.getId("RequestBody");const t=this.getId("slctRequestType").getSelectedKey();const o=e?e.getValue():"";const s={RequestType:t,RequestBody:o};this.resolveRequest(s)},onPressCopy:function(e){const t=this.getId("RequestResponse");const o=t.getValue();navigator.clipboard.writeText(o).then(()=>{MessageToast.show("Text copied to clipboard!")}).catch(e=>{MessageToast.show("Failed to copy text");console.error("Clipboard error:",e)})},onSelectionChange:function(){const e=this.getId("RequestBody");e.setValue("");e.setEnabled(true)},resolveRequest:function(e){const t=this.getId("RequestResponse");fetch(`${jQuery.sap.getModulePath("com/sap/cep/apimonitoringapp/apimonitorui")}/api-monitor/getUIToken()`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":"Fetch","Content-Type":"application/atom+xml"}}).then(n=>{this._csrfToken=n.headers.get("X-Csrf-Token");fetch(`${jQuery.sap.getModulePath("com/sap/cep/apimonitoringapp/apimonitorui")}/api-monitor/sendMonitoringRequest`,{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json;odata.metadata=minimal;IEEE754Compatible=true","Content-Type":"application/json;charset=UTF-8;IEEE754Compatible=true","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":this._csrfToken}}).then(e=>e.json()).then(e=>{const o=JSON.parse(e.value);t.setValue(o.msg);this.hideBusyIndicator()}).catch(e=>{this.hideBusyIndicator();s.error(`Error encountered when sending request: ${e}`);o.error(this.getResourceBundle().getText("errorMessage_SendRequest"))})}).catch(e=>{this.hideBusyIndicator();s.error(`Error retrieving data: ${e}`);o.error(this.getResourceBundle().getText("errorMessage_SendRequest"))})}})});
//# sourceMappingURL=Homepage.controller.js.map